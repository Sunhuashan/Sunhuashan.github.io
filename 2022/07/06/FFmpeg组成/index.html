<!DOCTYPE html>
<html lang="en">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="FFmpeg的组成"/>




  <meta name="keywords" content="音视频," />





  <link rel="alternate" href="/default" title="sunhuashan" >




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.1" />



<link rel="canonical" href="http://example.com/2022/07/06/FFmpeg组成/"/>


<meta name="description" content="FFmpeg的组成 封装模块AVFormat 封装格式可以理解为一种将音频流和视频流组装起来的协议，实现音频与视频的同步。如，MP4，FLV等。 AVFormat模块实现了绝大多数的封装格式，可以进行封装和解封装。同时，可以自定义自己的封装格式。  编解码模块AVCodec 编码格式可以理解为一种将音频或者视频进行压缩的协议，减少文件大小，提高传输效率。如，MP3，H.265等。 AVCodec模">
<meta property="og:type" content="article">
<meta property="og:title" content="FFmpeg的组成">
<meta property="og:url" content="http://example.com/2022/07/06/FFmpeg%E7%BB%84%E6%88%90/index.html">
<meta property="og:site_name" content="sunhuashan">
<meta property="og:description" content="FFmpeg的组成 封装模块AVFormat 封装格式可以理解为一种将音频流和视频流组装起来的协议，实现音频与视频的同步。如，MP4，FLV等。 AVFormat模块实现了绝大多数的封装格式，可以进行封装和解封装。同时，可以自定义自己的封装格式。  编解码模块AVCodec 编码格式可以理解为一种将音频或者视频进行压缩的协议，减少文件大小，提高传输效率。如，MP3，H.265等。 AVCodec模">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2022/07/06/FFmpeg%E7%BB%84%E6%88%90/AVFilter%E4%BE%8B%E5%AD%90.png">
<meta property="og:image" content="http://example.com/2022/07/06/FFmpeg%E7%BB%84%E6%88%90/ffmpeg%E5%B7%A5%E4%BD%9C%E6%AD%A5%E9%AA%A4.png">
<meta property="article:published_time" content="2022-07-06T02:20:00.000Z">
<meta property="article:modified_time" content="2022-07-11T08:22:48.835Z">
<meta property="article:author" content="sunhuashan">
<meta property="article:tag" content="音视频">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2022/07/06/FFmpeg%E7%BB%84%E6%88%90/AVFilter%E4%BE%8B%E5%AD%90.png">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1" />
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title> FFmpeg的组成 - sunhuashan </title>
  <meta name="generator" content="Hexo 5.4.2"></head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">sunhuashan</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/archives">
                            
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                About
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          FFmpeg的组成
        
      </h1>

      <time class="post-time">
          Jul 06 2022
      </time>
    </header>



    
            <div class="post-content">
            <h3 id="FFmpeg的组成"><a href="#FFmpeg的组成" class="headerlink" title="FFmpeg的组成"></a><code>FFmpeg</code>的组成</h3><ol>
<li><p>封装模块<code>AVFormat</code></p>
<p>封装格式可以理解为一种将音频流和视频流组装起来的协议，实现音频与视频的同步。如，MP4，FLV等。</p>
<p><code>AVFormat</code>模块实现了绝大多数的封装格式，可以进行封装和解封装。同时，可以自定义自己的封装格式。</p>
</li>
<li><p>编解码模块<code>AVCodec</code></p>
<p>编码格式可以理解为一种将音频或者视频进行压缩的协议，减少文件大小，提高传输效率。如，MP3，H.265等。</p>
<p><code>AVCodec</code>模块实现了绝大多数的编码格式，可以进行编码和解码。</p>
</li>
<li><p>滤镜模块<code>AVFilter</code></p>
<p><code>AVFilter</code>模块提供了一个通用的音频、视频、字幕等滤镜处理框架。下面是一个滤镜处理的例子.</p>
<p><img src="AVFilter%E4%BE%8B%E5%AD%90.png"></p>
<p>对应的命令行如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./ffmpeg -i INPUT -vf &quot;split [mian][tmp]; [tmp] crop=iw:ih/2:0:0, vflip [flip]; [main][flip] overlay=0:H/2&quot; OUTPUT<br></code></pre></td></tr></table></figure>

<p><code>split</code>滤镜 将视频流分割，并将第二部分打上<code>[tmp]</code>标签;</p>
<p><code>crop</code>滤镜 根据给定参数，对视频进行裁剪 ；</p>
<p><code>vflip</code>滤镜 根据给定参数，对视频进行纵坐标调换操作，打上<code>flip</code>标签；</p>
<p><code>overlay</code>滤镜 将一路输入覆盖到另一路之上，合并输出为一路视频 。    </p>
</li>
<li><p>视频图像转换计算模块<code>swscale</code></p>
<p><code>swscale</code>模块提供高级的图像转换API ,例如，可以实现1080P转720P的图片缩放， YUV转RGB的图片格式转换。</p>
</li>
<li><p>音频转换计算模块<code>swresample</code></p>
<p><code>swresample</code>模块提供高级的音频重采样API，可以实现音频采样，音频通道布局转换等。</p>
</li>
</ol>
<h3 id="编解码工具ffmpeg的使用"><a href="#编解码工具ffmpeg的使用" class="headerlink" title="编解码工具ffmpeg的使用"></a>编解码工具<code>ffmpeg</code>的使用</h3><p><code>ffmpeg</code>是<code>FFmpeg</code>编译后生成的一个可执行文件，下面一个例子介绍该工具的使用。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -i input.mp4 -f avi output.avi<br></code></pre></td></tr></table></figure>

<p>该命令将<code>MP4</code>格式的文件转换为<code>AVI</code>格式的文件，通过<code>-i</code>参数获取<code>输入源</code>，通过<code>-f</code>参数规定<code>输出格式</code>。</p>
<p><code>ffmpeg</code>的主要工作流程包括:</p>
<ul>
<li>Demuxing(解封装)</li>
<li>Decoding(解码)</li>
<li>Encoding(编码)</li>
<li>Muxing(封装)</li>
</ul>
<p>转换步骤如下图</p>
<p><img src="ffmpeg%E5%B7%A5%E4%BD%9C%E6%AD%A5%E9%AA%A4.png"></p>
<h3 id="播放器工具ffplay的使用"><a href="#播放器工具ffplay的使用" class="headerlink" title="播放器工具ffplay的使用"></a>播放器工具<code>ffplay</code>的使用</h3><p><code>ffplay</code>也是<code>FFmpeg</code>编译后生成的一个可执行文件，提供了音视频显示和播放相关的图像信息、音频的波形信息等。</p>
<h3 id="多媒体分析器ffprobe的使用"><a href="#多媒体分析器ffprobe的使用" class="headerlink" title="多媒体分析器ffprobe的使用"></a>多媒体分析器<code>ffprobe</code>的使用</h3><p><code>ffplay</code>也是<code>FFmpeg</code>编译后生成的一个可执行文件，可以从媒体文件或者媒体流中获取媒体信息，比如音频的参数、视频的参数等等。</p>

            </div>
          

    
      <footer class="post-footer">
		
		<div class="post-tags">
		  
			<a href="/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/">音视频</a>
		  
		</div>
		

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2022/07/06/FFmpeg%E5%91%BD%E4%BB%A4/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">FFmpeg命令</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2022/06/19/d2l-ch1/">
        <span class="next-text nav-default">d2l-ch1</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
  </div>


      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2020 -
    
    2024
    <span class="footer-author">sunhuashan.</span>
    <span class="power-by">
        Powered by <a class="hexo-link" target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> and <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/frostfan/hexo-theme-polarbear">Polar Bear</a>
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
